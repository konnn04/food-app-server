{% import 'admin/layout.html' as layout with context -%}
{% import 'admin/static.html' as admin_static with context %}
<!DOCTYPE html>
<html>
  <head>
    <title>{% block title %}{% if admin_view.category %}{{ admin_view.category }} - {% endif %}{{ admin_view.name }} - {{ admin_view.admin.name }}{% endblock %}</title>
    {% block head_meta %}
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% endblock %}
    {% block head_css %}
        <link href="{{ admin_static.url(filename='bootstrap/bootstrap4/swatch/{swatch}/bootstrap.min.css'.format(swatch=config.get('FLASK_ADMIN_SWATCH', 'default')), v='4.2.1') }}" rel="stylesheet">
        {% if config.get('FLASK_ADMIN_SWATCH', 'default') == 'default' %}
        <link href="{{ admin_static.url(filename='bootstrap/bootstrap4/css/bootstrap.min.css', v='4.2.1') }}" rel="stylesheet">
        {% endif %}
        <link href="{{ admin_static.url(filename='admin/css/bootstrap4/admin.css', v='1.1.1') }}" rel="stylesheet">
        <link href="{{ admin_static.url(filename='bootstrap/bootstrap4/css/font-awesome.min.css', v='4.7.0') }}" rel="stylesheet">
        <style>
          html, body { height: 100%; }
          body { margin: 0; }
          .fa-layout { display: flex; min-height: 100vh; }
          .fa-sidebar { width: 240px; background: #1f2937; color: #fff; display: flex; flex-direction: column; }
          .fa-brand { padding: 16px; font-weight: 600; border-bottom: 1px solid rgba(255,255,255,0.1); }
          .fa-nav { flex: 1 1 auto; overflow-y: auto; padding: 8px 0; }
          .fa-nav a { display: block; color: #e5e7eb; padding: 10px 16px; text-decoration: none; }
          .fa-nav a:hover { background: #374151; color: #fff; }
          .fa-footer { padding: 12px 16px; border-top: 1px solid rgba(255,255,255,0.1); }
          .fa-content { flex: 1 1 auto; background: #f9fafb; }
          .fa-content .fa-container { padding: 20px; }
        </style>
    {% endblock %}
    {% block head %}{% endblock %}
    {% block head_tail %}{% endblock %}
  </head>
  <body>
  {% block page_body %}
    <div class="fa-layout">
      <aside class="fa-sidebar">
        <div class="fa-brand">
          <a href="{{ admin_view.admin.url }}" style="color: #fff; text-decoration: none;">{{ admin_view.admin.name }}</a>
        </div>
        <nav class="fa-nav">
          <!-- <a href="{{ admin_view.admin.url }}">Home</a> -->
          {# build vertical menu from layout.menu() #}
          {% for item in admin_view.admin.menu() %}
            {% if not item.is_category() and item.is_accessible() and item.is_visible() and item.name != 'Đăng nhập' and item.name != 'Home' %}
              <a class="nav-link" href="{{ item.get_url() }}">{{ layout.menu_icon(item) }}{{ item.name }}</a>
            {% elif item.is_category() %}
              <div class="px-3 text-uppercase small mt-2 mb-1" style="opacity:.7;">{{ item.name }}</div>
              {% for child in item.get_children() %}
                {% if not child.is_category() %}
                  <a class="nav-link" href="{{ child.get_url() }}">{{ layout.menu_icon(child) }}{{ child.name }}</a>
                {% endif %}
              {% endfor %}
            {% endif %}
          {% endfor %}
        </nav>
        <div class="fa-footer">
          {% if current_user.is_authenticated %}
            <a class="btn btn-sm btn-outline-light" href="{{ url_for('admin_auth.logout') }}">Đăng xuất</a>
          {% else %}
            <a class="btn btn-sm btn-light" href="{{ url_for('admin_auth.index') }}">Đăng nhập</a>
          {% endif %}
        </div>
      </aside>
      <main class="fa-content" style="max-height: 100vh; overflow-y: auto;">
        <div class="fa-container">
          {% block messages %}{{ layout.messages() }}{% endblock %}
          {% set render_ctx = h.resolve_ctx() %}
          {% block body %}{% endblock %}
        </div>
      </main>
    </div>
  {% endblock %}

  {% block tail_js %}
    <script src="{{ admin_static.url(filename='vendor/jquery.min.js', v='3.5.1') }}" type="text/javascript"></script>
    <script src="{{ admin_static.url(filename='bootstrap/bootstrap4/js/popper.min.js') }}" type="text/javascript"></script>
    <script src="{{ admin_static.url(filename='bootstrap/bootstrap4/js/bootstrap.min.js', v='4.2.1') }}" type="text/javascript"></script>
    <script src="{{ admin_static.url(filename='vendor/moment.min.js', v='2.9.0') }}" type="text/javascript"></script>
    <script src="{{ admin_static.url(filename='vendor/bootstrap4/util.js', v='4.3.1') }}" type="text/javascript"></script>
    <script src="{{ admin_static.url(filename='vendor/bootstrap4/dropdown.js', v='4.3.1') }}" type="text/javascript"></script>
    <script src="{{ admin_static.url(filename='vendor/select2/select2.min.js', v='4.2.1') }}" type="text/javascript"></script>
    <script src="{{ admin_static.url(filename='vendor/multi-level-dropdowns-bootstrap/bootstrap4-dropdown-ml-hack.js') }}" type="text/javascript"></script>
    <script src="{{ admin_static.url(filename='admin/js/helpers.js', v='1.0.0') }}" type="text/javascript"></script>
  {% endblock %}
  {% block tail %}{% endblock %}
  </body>
 </html>


